CREATE DATABASE IF NOT EXISTS PASSAGENS_AEREAS;
USE PASSAGENS_AEREAS;

CREATE TABLE IF NOT EXISTS PASSAGEIROS(
COD_PASSAGEIRO INT PRIMARY KEY,
NOME VARCHAR(100) NOT NULL,
SOBRENOME VARCHAR(100) NOT NULL,
DATA_NASC DATE NOT NULL,
NACIONALIDADE VARCHAR(100) NOT NULL
);

CREATE TABLE IF NOT EXISTS AEROPORTOS(
ID_AEROPORTO INT PRIMARY KEY,
NOME VARCHAR(100) NOT NULL,
CIDADE VARCHAR(100) NOT NULL,
ESTADO VARCHAR(100) NOT NULL,
PAIS VARCHAR(100) NOT NULL,
LATITUDE VARCHAR(50) NOT NULL,
LONGITUDE VARCHAR(50) NOT NULL,
TAMANHO_PISTA DECIMAL(20,1) NOT NULL
);

CREATE TABLE IF NOT EXISTS CIA_AEREAS(
ID_CIA INT PRIMARY KEY,
CNPJ VARCHAR(20) NOT NULL,
NOME_FANTASIA VARCHAR(100) NOT NULL
);

CREATE TABLE IF NOT EXISTS RESERVAS(
ID_RESERVA INT PRIMARY KEY,
DATA_RESERVA DATE NOT NULL,
FORMA_PGTO ENUM("DINHEIRO","PIX","DEBITO","CREDITO") NOT NULL,
VALOR_RESERVA DECIMAL(10,2) NOT NULL
);

CREATE TABLE IF NOT EXISTS AERONAVES(
PFX_AERO VARCHAR(20) PRIMARY KEY,
MODELO VARCHAR(50) NOT NULL,
ANO_FABR YEAR NOT NULL,
FABRICANTE VARCHAR(50) NOT NULL,
POLTRONAS INT NOT NULL,
CIA_AEREA INT NOT NULL,
CONSTRAINT CIA_AERO FOREIGN KEY(CIA_AEREA) REFERENCES CIA_AEREAS(ID_CIA));

CREATE TABLE IF NOT EXISTS VOOS(
ID_VOO INT,
ASSENTO VARCHAR(10),
AERO_PART INT NOT NULL,
DATA_PART DATE NOT NULL,
HORA_PART TIME NOT NULL,
AERO_CHEG INT NOT NULL,
DATA_CHEG DATE NOT NULL,
HORA_CHEG TIME NOT NULL,
AERONAVE VARCHAR(20) NOT NULL,
CIA_AEREA INT NOT NULL,
PRIMARY KEY(ID_VOO,ASSENTO),
CONSTRAINT AEROP_VOO1 FOREIGN KEY(AERO_PART) REFERENCES AEROPORTOS(ID_AEROPORTO),
CONSTRAINT AEROP_VOO2 FOREIGN KEY(AERO_CHEG) REFERENCES AEROPORTOS(ID_AEROPORTO),  
CONSTRAINT AERON_VOO FOREIGN KEY(AERONAVE) REFERENCES AERONAVES(PFX_AERO),
CONSTRAINT CIA_VOO FOREIGN KEY(CIA_AEREA) REFERENCES CIA_AEREAS(ID_CIA)
);

CREATE TABLE IF NOT EXISTS VOOS_RESERVAS(
ID_VOO INT,
ASSENTO VARCHAR(10),
ID_RESERVA INT,
PRIMARY KEY(ID_VOO,ASSENTO,ID_RESERVA),
CONSTRAINT VR1 FOREIGN KEY(ID_VOO,ASSENTO) REFERENCES VOOS(ID_VOO,ASSENTO),
CONSTRAINT VR2 FOREIGN KEY(ID_RESERVA) REFERENCES RESERVAS(ID_RESERVA)
);

CREATE TABLE IF NOT EXISTS PASSAGEIROS_RESERVAS(
PASSAGEIRO INT,
ID_RESERVA INT,
PRIMARY KEY(PASSAGEIRO,ID_RESERVA),
CONSTRAINT PR1 FOREIGN KEY(PASSAGEIRO) REFERENCES PASSAGEIROS(COD_PASSAGEIRO),
CONSTRAINT PR2 FOREIGN KEY(ID_RESERVA) REFERENCES RESERVAS(ID_RESERVA));

INSERT INTO PASSAGEIROS
(COD_PASSAGEIRO,NOME,SOBRENOME,DATA_NASC,NACIONALIDADE)
VALUES 
("1112","LUFFY","MONKEY D","2000-12-12","BRASILEIRO"),
("2223","ZORO","JURO","2000-12-12","JAPONES"),
("3334","SANJI","VINSMOKE","2000-12-12","EUROPEU"),
("4445","NAMI","LADRA","2000-12-12","DA ROÃ‡A"),
("5556","CHOPPER","MEDICINE","2000-12-12","DA MATA");

INSERT INTO AEROPORTOS
(ID_AEROPORTO,NOME,CIDADE,ESTADO,PAIS,LATITUDE,LONGITUDE,TAMANHO_PISTA)
VALUES 
("1111","CRUZEIRO","GUARULHOS","MG","BR","-100.100.100","100.100.100","100"),
("2222","FRANGAS","CONS. PENA","MG","BR","-200.100.100","200.100.100","200"),
("3333","CRICIUMA","VALADARES","MG","BR","-300.100.100","300.100.100","300"),
("4444","VAXCO","PENHA DO NORTE","MG","BR","-400.100.100","400.100.100","400"),
("5555","JUVENTUDE","RESPLENDOR","MG","BR","-500.100.100","500.100.100","500");

INSERT INTO CIA_AEREAS
(ID_CIA,CNPJ,NOME_FANTASIA)
VALUES 
("11","23232344","MONKEY D"),
("22","24242455","JURO"),
("33","25252566","VINSMOKE"),
("44","26262677","LADRA"),
("55","27272788","MEDICINE");

INSERT INTO RESERVAS
(ID_RESERVA,DATA_RESERVA,FORMA_PGTO,VALOR_RESERVA)
VALUES 
("12","2020-03-03","DEBITO","200"),
("23","2020-03-03","CREDITO","300"),
("34","2020-03-03","DINHEIRO","400"),
("45","2020-03-03","DINHEIRO","500"),
("56","2020-03-03","PIX","600");

INSERT INTO AERONAVES
(PFX_AERO,MODELO,ANO_FABR,FABRICANTE,POLTRONAS,CIA_AEREA)
VALUES 
("1122","QUE VOA","1997-03-03","GOL","01","01"),
("2233","VOADOR","1997-03-03","LATAM","02","02"),
("3344","PLANANTE","1997-03-03","AZUL","03","03"),
("4455","GRANDE","1997-03-03","FLY EMIRATES","04"),
("5566","PEQUENO","1997-03-03","VERMELHO","05");

INSERT INTO VOOS
(ID_VOO,ASSENTO,AERO_PART,DATA_PART,HORA_PART,AERO_CHEG,DATA_CHEG,HORA_CHEG,AERONAVE,CIA_AEREA)
VALUES 
("99","AB","1111","2024-03-03","12:00","2222","2024-04-04","12:00","1122","11"),
("98","AC","2222","2024-03-03","12:00","3333","2024-04-04","12:00","2233","22"),
("97","AD","3333","2024-03-03","12:00","4444","2024-04-04","12:00","3344","33"),
("96","AE","4444","2024-03-03","12:00","5555","2024-04-04","12:00","4455","44"),
("95","AF","5555","2024-03-03","12:00","1111","2024-04-04","12:00","5566","55");

INSERT INTO VOOS_RESERVAS
(ID_VOO,ASSENTO,ID_RESERVA)
VALUES 
("99","AB","12"),
("98","AC","23"),
("97","AD","34"),
("96","AE","45"),
("95","AF","56");

INSERT INTO PASSAGEIROS_RESERVAS
(PASSAGEIRO,ID_RESERVA)
VALUES 
("111","12"),
("222","23"),
("333","34"),
("444","45"),
("555","56");

DELETE FROM PASSAGEIROS WHERE COD_PASSAGEIRO = '111';
DELETE FROM PASSAGEIROS WHERE COD_PASSAGEIRO = '222';

DELETE FROM AEROPORTOS WHERE ID_AEROPORTO = '1111';
DELETE FROM AEROPORTOS WHERE ID_AEROPORTO = '2222';

DELETE FROM CIA_AEREAS WHERE ID_CIA = '11';
DELETE FROM CIA_AEREAS WHERE ID_CIA = '22';

DELETE FROM RESERVAS WHERE ID_RESERVA = '12';
DELETE FROM RESERVAS WHERE ID_RESERVA = '23';

DELETE FROM AERONAVES WHERE PFX_AERO = '1122';
DELETE FROM AERONAVES WHERE PFX_AERO = '2233';

DELETE FROM VOOS WHERE ID_VOO = '99';
DELETE FROM VOOS WHERE ID_VOO = '98';

DELETE FROM VOOS_RESERVAS WHERE ID_VOO = '99';
DELETE FROM VOOS_RESERVAS WHERE ID_VOO = '98';

DELETE FROM PASSAGEIROS_RESERVAS WHERE ID_RESERVA = '12';
DELETE FROM PASSAGEIROS_RESERVAS WHERE ID_RESERVA = '23';

SELECT * FROM PASSAGEIROS;
SELECT * FROM AEROPORTOS;
SELECT * FROM CIA_AEREAS;
SELECT * FROM RESERVAS;
SELECT * FROM AERONAVES;
SELECT * FROM VOOS;
SELECT * FROM VOOS_RESERVAS;
SELECT * FROM PASSAGEIROS_RESERVAS;